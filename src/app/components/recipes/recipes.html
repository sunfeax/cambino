<section class="recipes">
  <h2 class="recipes__title">Recetas destacadas</h2>

  <div class="recipes__grid">
    @for (recipe of recipes; track recipe.id) {
      <article class="recipe-card">
        <div class="recipe-card__image">
          <img [src]="recipe.image" [alt]="recipe.name" loading="lazy">
          <span class="recipe-card__badge">{{ recipe.difficulty }}</span>
        </div>
        <div class="recipe-card__content">
          <h3 class="recipe-card__name">{{ recipe.name }}</h3>
          <p class="recipe-card__meta">
            <span>{{ recipe.cuisine }}</span>
            @if (recipe.mealType.length) {
              <span>‚Ä¢ {{ recipe.mealType.join(', ') }}</span>
            }
          </p>
          <ul class="recipe-card__stats">
            <li><span>‚è±Ô∏è</span>{{ recipe.prepTimeMinutes + recipe.cookTimeMinutes }} min</li>
            <li><span>üçΩÔ∏è</span>{{ recipe.servings }} raciones</li>
            <li><span>‚≠ê</span>{{ recipe.rating }} ({{ recipe.reviewCount }})</li>
          </ul>
          <h4 class="recipe-card__subtitle">Ingredientes destacados</h4>
          <ul class="recipe-card__ingredients">
            @for (ingredient of recipe.ingredients.slice(0, 3); track ingredient) {
              <li>{{ ingredient }}</li>
            }
            @if (recipe.ingredients.length > 3) {
              <li class="recipe-card__more">+{{ recipe.ingredients.length - 3 }} m√°s</li>
            }
          </ul>
          <button type="button" class="recipe-card__button" (click)="showData(recipe)">Ver detalles</button>
        </div>
      </article>
    }
  </div>
</section>

@if (selectedRecipe) {
  <div class="recipe-detail" role="dialog" aria-modal="true">
    <div class="recipe-detail__overlay" (click)="clearSelectedRecipe()"></div>
    <article class="recipe-detail__content">
      <button type="button" class="recipe-detail__close" (click)="clearSelectedRecipe()" aria-label="Cerrar">√ó</button>
      <header class="recipe-detail__header">
        <img [src]="selectedRecipe.image" [alt]="selectedRecipe.name" loading="lazy">
        <div class="recipe-detail__header-info">
          <h3>{{ selectedRecipe.name }}</h3>
          <p>{{ selectedRecipe.cuisine }} ¬∑ {{ selectedRecipe.difficulty }}</p>
          @if (selectedRecipe.mealType.length) {
            <p>{{ selectedRecipe.mealType.join(', ') }}</p>
          }
        </div>
      </header>
      <section class="recipe-detail__section">
        <h4>Ingredientes</h4>
        <ul>
          @for (ingredient of selectedRecipe.ingredients; track ingredient) {
            <li>{{ ingredient }}</li>
          }
        </ul>
      </section>
      <section class="recipe-detail__section">
        <h4>Pasos</h4>
        <ol>
          @for (step of selectedRecipe.instructions; track step) {
            <li>{{ step }}</li>
          }
        </ol>
      </section>
    </article>
  </div>
}
